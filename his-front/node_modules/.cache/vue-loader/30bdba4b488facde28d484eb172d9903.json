{"remainingRequest":"D:\\project\\His\\his-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\His\\his-front\\src\\views\\register\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\His\\his-front\\src\\views\\register\\index.vue","mtime":1663816004868},{"path":"D:\\project\\His\\his-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663817319544},{"path":"D:\\project\\His\\his-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1663817323503},{"path":"D:\\project\\His\\his-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663817319544},{"path":"D:\\project\\His\\his-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1663817330542}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnDQppbXBvcnQgQnJlYWRjcnVtYiBmcm9tICdAL2NvbXBvbmVudHMvQnJlYWRjcnVtYicNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIEJyZWFkY3J1bWINCiAgfSwNCiAgZGF0YSAoKSB7DQogICAgdmFyIGNoZWNrSWQgPSAocnVsZSwgdmFsdWUsIGNiKSA9PiB7DQogICAgICBjb25zdCByZWcgPSAvXlsxLTldWzAtOV17NX0oMTl8MjApWzAtOV17Mn0oKDAxfDAzfDA1fDA3fDA4fDEwfDEyKSgwWzEtOV18WzEtMl1bMC05XXwzMSl8KDA0fDA2fDA5fDExKSgwWzEtOV18WzEtMl1bMC05XXwzMCl8MDIoMFsxLTldfFsxLTJdWzAtOV0pKVswLTldezN9KFswLTldfHh8WCkkLw0KICAgICAgaWYgKHJlZy50ZXN0KHZhbHVlKSkgew0KICAgICAgICByZXR1cm4gY2IoKQ0KICAgICAgfQ0KICAgICAgY2IobmV3IEVycm9yKCfor7fovpPlhaXlkIjms5XnmoTouqvku73or4Hlj7cnKSkNCiAgICB9DQogICAgcmV0dXJuIHsNCiAgICAgIGFjdGl2ZUluZGV4OiAwLA0KICAgICAgZm9ybTogew0KICAgICAgICBuYW1lOiAn5p2O55m9JywNCiAgICAgICAgZ2VuZGVyOiAwLA0KICAgICAgICBpZG5vOiAnMTEwMTAxMTk5MDAzMDc5NTUwJywNCiAgICAgICAgYmlydGhkYXk6ICcxOTkwLTAzLTA3JywNCiAgICAgICAgYWdlOiAzMCwNCiAgICAgICAgYWRkcmVzczogJ+WMl+S6rOW4gi3kuJzln47ljLonLA0KICAgICAgICByZWdzaXRMZXZlbElkOiBudWxsLA0KICAgICAgICBkZXB0SWQ6IG51bGwsDQogICAgICAgIGRvY3RvcklkOiBudWxsLA0KICAgICAgICBib29rOiAwLA0KICAgICAgICBmZWU6IDAsDQogICAgICAgIHJlYWRtZTogJ+S9k+ajgCcsDQogICAgICAgIHByZXNlbnQ6ICfml6AnLA0KICAgICAgICBwcmVzZW50VHJlYXQ6ICfml6AnLA0KICAgICAgICBoaXN0b3J5OiAn5pegJywNCiAgICAgICAgYWxsZXJneTogJ+aXoCcsDQogICAgICAgIHN0YXR1czogMQ0KICAgICAgfSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIG5hbWU6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi35ZCNJywgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgXSwNCiAgICAgICAgaWRubzogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXouqvku73or4Hlj7fnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICB7IHZhbGlkYXRvcjogY2hlY2tJZCwgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgXSwNCiAgICAgICAgYWRkcmVzczogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnlKjmiLflkI0nLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICBdLA0KICAgICAgICByZWFkbWU6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6Lqr5Lu96K+B5Y+356CBJywgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgXQ0KICAgICAgfSwNCiAgICAgIGRvY3Rvcjoge30NCiAgICB9DQogIH0sDQogIG1vdW50ZWQgKCkgew0KICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdnZXRSZWdpc3RlckxldmVsJykNCiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ2V0RGVwYXJ0bWVudCcpDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoWydyZWdpc3RlcicsICdkZXBhcnRtZW50J10pDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBmZWUgKCkgew0KICAgICAgaWYgKHRoaXMuZm9ybS5yZWdzaXRMZXZlbElkKSB7DQogICAgICAgIHRoaXMuZm9ybS5mZWUgPSB0aGlzLnJlZ2lzdGVyW3RoaXMuZm9ybS5yZWdzaXRMZXZlbElkXS5mZWUNCiAgICAgICAgaWYgKHRoaXMuZm9ybS5ib29rID09PSAxKSB7DQogICAgICAgICAgdGhpcy5mb3JtLmZlZSArPSA1DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5kb2N0b3IgPSB7fQ0KICAgICAgfQ0KICAgIH0sDQogICAgc2F2ZSAoKSB7DQogICAgICB0aGlzLiRyZWZzLmZvcm1SZWYudmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCcvcmVnaXN0ZXJzJywgKCkgPT4ge30sIHRoaXMuZm9ybSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBnZXREb2N0b3IgKCkgew0KICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuZG9jdG9yKS5sZW5ndGggIT09IDApIHJldHVybg0KICAgICAgaWYgKHRoaXMuZm9ybS5yZWdzaXRMZXZlbElkICYmIHRoaXMuZm9ybS5kZXB0SWQpIHsNCiAgICAgICAgdGhpcy4kYXhpb3MuaHR0cC5nZXQoJy91c2Vycy9saXN0Jywgew0KICAgICAgICAgIHBhcmFtczogew0KICAgICAgICAgICAgYWN0aXZlOiAxLA0KICAgICAgICAgICAgdXNlcl90eXBlOiB0aGlzLnJlZ2lzdGVyW3RoaXMuZm9ybS5yZWdzaXRMZXZlbElkXS5yb2xlSWQsDQogICAgICAgICAgICBkZXB0X2lkOiB0aGlzLmZvcm0uZGVwdElkDQogICAgICAgICAgfQ0KICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLmRvY3RvciA9IHJlc3BvbnNlLmRhdGEuZGF0YQ0KICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35YWI6YCJ5oup5oyC5Y+357qn5Yir5ZKM56eR5a6kJykNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/register","sourcesContent":["<template>\r\n  <div>\r\n    <Breadcrumb msg1=\"挂号收费\" msg2=\"添加挂号\" />\r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n      <!-- 提示区域 -->\r\n      <el-alert title=\"添加挂号信息\" type=\"info\" center show-icon :closable=\"false\"></el-alert>\r\n      <el-steps :active=\"parseInt(activeIndex)\" finish-status=\"success\">\r\n        <el-step title=\"用户信息\"></el-step>\r\n        <el-step title=\"病例情况\"></el-step>\r\n        <el-step title=\"挂号信息\"></el-step>\r\n      </el-steps>\r\n\r\n      <el-form :model=\"form\" :rules=\"rules\" ref=\"formRef\" label-width=\"110px\" label-position=\"left\">\r\n        <el-tabs\r\n          v-model=\"activeIndex\"\r\n          :tab-position=\"'left'\"\r\n        >\r\n          <el-tab-pane label=\"用户信息\" name=\"0\">\r\n            <el-form-item label=\"姓名\" prop=\"name\">\r\n              <el-input v-model=\"form.name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"性别\">\r\n              <el-radio-group v-model=\"form.gender\">\r\n                <el-radio :label=\"0\">男</el-radio>\r\n                <el-radio :label=\"1\">女</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"身份证号\" prop=\"idno\">\r\n              <el-input v-model=\"form.idno\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"出生日期\" prop=\"birth\">\r\n              <el-date-picker\r\n                v-model=\"form.birthday\"\r\n                type=\"date\"\r\n                placeholder=\"选择日期\"\r\n                value-format=\"yyyy-MM-dd\"\r\n              ></el-date-picker>\r\n            </el-form-item>\r\n            <el-form-item label=\"年龄\">\r\n              <el-input v-model=\"form.age\" type=\"number\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"地址\" prop=\"address\">\r\n              <el-input v-model=\"form.address\"></el-input>\r\n            </el-form-item>\r\n          </el-tab-pane>\r\n\r\n          <el-tab-pane label=\"病例情况\" name=\"1\">\r\n            <el-form-item label=\"健康描述\" prop=\"readme\">\r\n              <el-input v-model=\"form.readme\" type=\"textarea\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"现病史\">\r\n              <el-input v-model=\"form.present\" type=\"textarea\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"现病史治疗情况\">\r\n              <el-input v-model=\"form.presentTreat\" type=\"textarea\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"既往史\">\r\n              <el-input v-model=\"form.history\" type=\"textarea\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"过敏史\">\r\n              <el-input v-model=\"form.allergy\" type=\"textarea\"></el-input>\r\n            </el-form-item>\r\n          </el-tab-pane>\r\n\r\n          <el-tab-pane label=\"挂号信息\" name=\"2\">\r\n            <el-form-item label=\"挂号级别\">\r\n              <el-select v-model=\"form.regsitLevelId\" placeholder=\"请选择\" :popper-append-to-body=\"false\" @change=\"fee\">\r\n                <el-option\r\n                  v-for=\"(value, id) in register\"\r\n                  :key=\"id\"\r\n                  :label=\"value.name\"\r\n                  :value=\"id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"挂号科室\" >\r\n              <el-select v-model=\"form.deptId\" placeholder=\"请选择\" :popper-append-to-body=\"false\" @change=\"doctor={}\">\r\n                <el-option\r\n                  v-for=\"(value, id) in department\"\r\n                  :key=\"id\"\r\n                  :label=\"value.name\"\r\n                  :value=\"id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"看诊医生\">\r\n              <el-select v-model=\"form.doctorId\" placeholder=\"请选择\" :popper-append-to-body=\"false\" @focus=\"getDoctor\">\r\n                <el-option\r\n                  v-for=\"(value, id) in doctor\"\r\n                  :key=\"id\"\r\n                  :label=\"value.name\"\r\n                  :value=\"id\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"是否要病历本\" prop=\"book\">\r\n              <el-radio-group v-model=\"form.book\" @change=\"fee\">\r\n                <el-radio-button :label=\"0\">否</el-radio-button>\r\n                <el-radio-button :label=\"1\">是</el-radio-button>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"应收金额\" prop=\"fee\">\r\n              <el-input v-model=\"form.fee\" disabled></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"save\">立即创建</el-button>\r\n            </el-form-item>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport Breadcrumb from '@/components/Breadcrumb'\r\nexport default {\r\n  components: {\r\n    Breadcrumb\r\n  },\r\n  data () {\r\n    var checkId = (rule, value, cb) => {\r\n      const reg = /^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|31)|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}([0-9]|x|X)$/\r\n      if (reg.test(value)) {\r\n        return cb()\r\n      }\r\n      cb(new Error('请输入合法的身份证号'))\r\n    }\r\n    return {\r\n      activeIndex: 0,\r\n      form: {\r\n        name: '李白',\r\n        gender: 0,\r\n        idno: '110101199003079550',\r\n        birthday: '1990-03-07',\r\n        age: 30,\r\n        address: '北京市-东城区',\r\n        regsitLevelId: null,\r\n        deptId: null,\r\n        doctorId: null,\r\n        book: 0,\r\n        fee: 0,\r\n        readme: '体检',\r\n        present: '无',\r\n        presentTreat: '无',\r\n        history: '无',\r\n        allergy: '无',\r\n        status: 1\r\n      },\r\n      rules: {\r\n        name: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' }\r\n        ],\r\n        idno: [\r\n          { required: true, message: '请输入身份证号码', trigger: 'blur' },\r\n          { validator: checkId, trigger: 'blur' }\r\n        ],\r\n        address: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' }\r\n        ],\r\n        readme: [\r\n          { required: true, message: '请输入身份证号码', trigger: 'blur' }\r\n        ]\r\n      },\r\n      doctor: {}\r\n    }\r\n  },\r\n  mounted () {\r\n    this.$store.dispatch('getRegisterLevel')\r\n    this.$store.dispatch('getDepartment')\r\n  },\r\n  computed: {\r\n    ...mapState(['register', 'department'])\r\n  },\r\n  methods: {\r\n    fee () {\r\n      if (this.form.regsitLevelId) {\r\n        this.form.fee = this.register[this.form.regsitLevelId].fee\r\n        if (this.form.book === 1) {\r\n          this.form.fee += 5\r\n        }\r\n        this.doctor = {}\r\n      }\r\n    },\r\n    save () {\r\n      this.$refs.formRef.validate(valid => {\r\n        this.$axios.post('/registers', () => {}, this.form)\r\n      })\r\n    },\r\n    getDoctor () {\r\n      if (Object.keys(this.doctor).length !== 0) return\r\n      if (this.form.regsitLevelId && this.form.deptId) {\r\n        this.$axios.http.get('/users/list', {\r\n          params: {\r\n            active: 1,\r\n            user_type: this.register[this.form.regsitLevelId].roleId,\r\n            dept_id: this.form.deptId\r\n          }\r\n        }).then(response => {\r\n          this.doctor = response.data.data\r\n        })\r\n      } else {\r\n        this.$message.error('请先选择挂号级别和科室')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.el-select-dropdown {\r\n  top: 38px !important;\r\n  left: 0 !important;\r\n}\r\n</style>\r\n"]}]}